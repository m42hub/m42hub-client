<p-card
  styleClass="w-full min-w-[320px] max-w-full sm:min-w-[360px] sm:max-w-[440px] rounded-xl overflow-hidden mx-auto shadow-lg my-4"
>
  <ng-template pTemplate="header">
    <div
      class="w-full h-32 rounded-t-xl overflow-hidden relative bg-gradient-to-r from-primary-400 to-primary-600"
    >
      <img
        *ngIf="showImage"
        [src]="imageUrl"
        alt="Banner do Projeto"
        class="absolute inset-0 w-full h-full object-cover"
        (error)="onImageError()"
      />
    </div>
  </ng-template>
  <ng-template pTemplate="content">
    <div class="w-full min-w-[280px] max-w-[280px] sm:min-w-[360px] sm:max-w-[360px] mx-auto">
      <h3
        class="text-lg font-bold text-800 mb-1 overflow-hidden text-ellipsis whitespace-nowrap min-h-[2.5rem]"
      >
        {{ project.name }}
      </h3>

      <div class="mb-1">
        <app-social-media-card
          [discord]="project.discord"
          [github]="project.github"
          [personalWebsite]="project.projectWebsite"
          [useOfficialColors]="true"
          [iconsOnly]="true"
          class="w-full"
        ></app-social-media-card>
      </div>

      <p class="text-surface-600 text-sm leading-relaxed mb-4 break-words min-h-18">
        {{ project.summary }}
      </p>

      <div class="mb-4">
        <span class="text-sm font-bold text-surface-500 uppercase tracking-wide">Função:</span>
        <span class="text-sm text-surface-600 ml-2">{{ roleName || 'Não informada' }}</span>
      </div>

      <div class="mb-4" *ngIf="requestDate">
        <span class="text-sm font-bold text-surface-500 uppercase tracking-wide">
          Data de solicitação:
        </span>
        <span class="text-sm text-surface-600 ml-2">{{ requestDateFormatado }}</span>
      </div>

      <div class="mb-4 flex flex-row gap-x-6 items-center text-xs text-surface-500 min-h-6 pl-1">
        <div class="flex flex-col">
          <span class="font-bold flex items-center"><i class="pi pi-calendar mr-1"></i>Criação:</span>
          <span>{{ creationDateFormatado }}</span>
        </div>
        <div class="flex flex-col">
          <span class="font-bold flex items-center"><i class="pi pi-calendar mr-1"></i>Início:</span>
          <span>{{ startDateFormatado }}</span>
        </div>
        <div class="flex flex-col">
          <span class="font-bold flex items-center"><i class="pi pi-calendar mr-1"></i>Prevista:</span>
          <span>{{ endDateFormatado }}</span>
        </div>
      </div>

      <div
        class="flex flex-col sm:flex-row items-stretch sm:items-center justify-between mt-2 gap-4 min-h-12"
      >
        <div class="flex flex-wrap gap-1 mb-2 sm:mb-0">
          <p-tag
            *ngFor="let tag of generalTags"
            [value]="tag.label"
            class="text-xs bg-surface-200 cursor-help"
            size="small"
            [pTooltip]="tag.tooltip"
            tooltipPosition="top"
            tooltipStyleClass="text-xs"
          ></p-tag>
        </div>
        <div class="flex flex-col sm:flex-row gap-2">
          <button
            *ngIf="isUserManager"
            pButton
            type="button"
            label="Editar"
            icon="pi pi-pencil"
            iconPos="left"
            size="small"
            class="p-button-md p-2 h-12 min-w-16 w-full sm:w-auto"
            (click)="onEditProject()"
          ></button>
          <button
            pButton
            type="button"
            label="Detalhes"
            icon="pi pi-eye"
            iconPos="left"
            size="small"
            class="p-button-info p-button-sm p-2 h-12 min-w-16 w-full sm:w-auto sm:ml-2"
            (click)="onViewDetails()"
          ></button>
        </div>
      </div>
    </div>
  </ng-template>
</p-card>
