<div
  class="header-container text-neutral flex flex-wrap items-center justify-between px-4 lg:px-8 py-2"
>
  <div class="flex items-center gap-2">
    <img src="/logo.png" alt="Logo" class="h-18 w-18 md:h-20 md:w-20 min-w-18 md:min-w-20" />
    <p-tag
      value="Open Beta"
      severity="warning"
      class="text-xs font-semibold shadow-lg text-white rounded-2xl min-w-18 ml-2"
    ></p-tag>
  </div>

  <div class="flex items-center gap-2 order-2 md:order-3">
    <ng-container *ngIf="isUserLoaded">
      <ng-container *ngIf="user$ | async as user; else loginButton">
        <div *ngIf="user; else loginButton">
          <div class="relative flex items-center">
            <p-avatar
              [image]="user.profilePicUrl || '/default_avatar.png'"
              shape="circle"
              size="large"
              styleClass="cursor-pointer border-2 border-gray-300 hover:border-primary transition"
              (click)="profileMenu.toggle($event)"
            ></p-avatar>
          </div>
        </div>
      </ng-container>
      <p-menu
        #profileMenu
        [popup]="true"
        [model]="profileMenuItems"
        styleClass="min-w-25 bg-gradient-to-br text-white rounded-xl shadow-xl border border-indigo-500 animate-fade-in"
      ></p-menu>
      <ng-template #loginButton>
        <p-button
          label="Entrar"
          icon="pi pi-sign-in"
          (onClick)="onLogin()"
          styleClass="p-button-sm"
        ></p-button>
      </ng-template>
    </ng-container>

    <ng-container *ngIf="isBrowser">
      <p-button
        [icon]="darkMode ? 'pi pi-moon' : 'pi pi-sun'"
        (onClick)="toggleDarkMode()"
        styleClass="p-button-rounded p-button-text"
      ></p-button>
    </ng-container>
  </div>

  <div class="w-full flex justify-center md:hidden order-3">
    <div class="flex items-center gap-2">
      <p-button
        label="Home"
        (onClick)="handleClick('/')"
        aria-label="Home"
        title="Home"
        styleClass="p-button-text px-2 text-lg m-2  hover:bg-surface-100"
      ></p-button>
      <p-button
        label="Projetos"
        (onClick)="handleClick('/projects')"
        aria-label="Projetos"
        title="Projetos"
        styleClass="p-button-text px-2 text-lg m-2  hover:bg-surface-100"
      ></p-button>
      <p-button
        label="Contribuições"
        (onClick)="handleClick('/contributions')"
        aria-label="Contribuições"
        title="Contribuições"
        styleClass="p-button-text px-2 text-lg m-2  hover:bg-surface-100"
      ></p-button>
    </div>
  </div>

  <div class="hidden md:flex items-center gap-4 order-2">
    <p-button
      label="Home"
      (onClick)="handleClick('/')"
      aria-label="Home"
      title="Home"
      styleClass="p-button-text px-2 text-lg m-2 hover:bg-surface-100"
    ></p-button>
    <p-button
      label="Projetos"
      (onClick)="handleClick('/projects')"
      aria-label="Projetos"
      title="Projetos"
      styleClass="p-button-text px-2 text-lg m-2 hover:bg-surface-100"
    ></p-button>
    <p-button
      label="Contribuições"
      (onClick)="handleClick('/contributions')"
      aria-label="Contribuições"
      title="Contribuições"
      styleClass="p-button-text px-2 text-lg m-2 hover:bg-surface-100"
    ></p-button>
  </div>
</div>

<div
  *ngIf="showLogoutError"
  class="w-full bg-red-500 text-white text-center py-2 font-semibold shadow-md"
>
  Erro ao fazer logout. Tente novamente.
</div>
